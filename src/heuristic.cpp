#include "data.h"

// generated by python
const size_t positions_by_win[32][5] = {
    {0,1,2,3,4},
    {1,2,3,4,5},
    {6,7,8,9,10},
    {7,8,9,10,11},
    {12,13,14,15,16},
    {13,14,15,16,17},
    {18,19,20,21,22},
    {19,20,21,22,23},
    {24,25,26,27,28},
    {25,26,27,28,29},
    {30,31,32,33,34},
    {31,32,33,34,35},
    {0,6,12,18,24},
    {6,12,18,24,30},
    {1,7,13,19,25},
    {7,13,19,25,31},
    {2,8,14,20,26},
    {8,14,20,26,32},
    {3,9,15,21,27},
    {9,15,21,27,33},
    {4,10,16,22,28},
    {10,16,22,28,34},
    {5,11,17,23,29},
    {11,17,23,29,35},
    {0,7,14,21,28},
    {1,8,15,22,29},
    {6,13,20,27,34},
    {7,14,21,28,35},
    {4,9,14,19,24},
    {5,10,15,20,25},
    {10,15,20,25,30},
    {11,16,21,26,31},
};

// generated by python
const int16_t heuristic_value[1024] = {
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
    4,    6,   -1,    4,    6, 1024,   -1,    6,   -1,   -1,   -1,   -1,    4,    6,   -1,    4,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    4,   -1,    6,    4,   -1,   -1,   -1,   -1,    6,   -1, 1024,    6,    4,   -1,    6,    4,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    2,    4,   -1,    2,    4,    6,   -1,    4,   -1,   -1,   -1,   -1,    2,    4,   -1,    2,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
    2,   -1,    4,    2,   -1,   -1,   -1,   -1,    4,   -1,    6,    4,    2,   -1,    4,    2,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0,
    1,    2,   -1,    1,    2,    4,   -1,    2,   -1,   -1,   -1,   -1,    1,    2,   -1,    1,
    1,   -1,    2,    1,   -1,   -1,   -1,   -1,    2,   -1,    4,    2,    1,   -1,    2,    1,
    0,    1,    1,    0,    1,    2,   -1,    1,    1,   -1,    2,    1,    0,    1,    1,    0
};

int board_t::heuristic() const {
    int total = 0;
    for(size_t i=0; i<32; i++) {
        uint16_t win_state = 0;
        const size_t* positions = positions_by_win[i];
        for(size_t x=0; x<5; x++) {
            uint16_t v = data[positions[x]];
            win_state |= v << (x*2);
        }
        int value = heuristic_value[win_state];
        total += value;
    }
    return total;
}